<link rel="stylesheet" href="content/userMgmt/userMgmt.css">
<!-- <div class="row" style="margin: 20px 0px 2% 0px;">
    <div class="col-md-6">
        <div class="branch-txt">
            <div style="display: inline-flex;width: 100%;">
                <div class="txt-finance">
                    <span class="select-lbl">Select Branch</span>
                </div>
                <select class="form-control deptwiseGraph" placeholder="Select Branch"
                    ng-model="branchDet.selectBranchId" name="selectBranchId"
                    ng-change="selectedBranchDet(branchDet.selectBranchId)">
                    <option value="{{branch.branchId}}" ng-repeat="branch in branchAccessList">
                        {{branch.branchName}}
                    </option>
                </select>
            </div>
        </div>
    </div>
    <div class="col-md-4" style="padding: 0px;">
        <div style="display: inline-flex;width: 100%;">
            <div class="search-box" style="margin-bottom: 14px;margin-right: 15px;">
                <input type="text" ng-model="searchEmp"><i style="margin-top: 3px;" class="fa fa-search"></i>
            </div>
            <div class="btn-help" ng-click="showHelpPopup('usr_acc_control')" style="float: right;margin-top: 7px;">
                <i class="fa fa-question-circle"></i>
            </div>
        </div>
    </div>
    <div class="col-md-2">
        <button type="button" class="btn btn-default btn-user" style="color: white;
                        font-size: 14px;float: right;margin-bottom: 1%;" ng-click="userAccesspopup()">
            <i class="fa fa-plus" style="color: white;font-size: 14px;" aria-hidden="true"></i> Add User
            Access</button>
    </div>
</div> -->
<div class="row" style="margin: 6px 35px 1% 0px;">
    <div style="float: right;">
        <span class="dot active"></span>
        <span style="color: #342e9f;">Indicate menu access due to assign role.</span>
    </div>
</div>
<div class="row">
    <div style="text-align:center;">
        <!-- <div ng-if="userwiseListLoading" class="loadingIndicatorContainer ldng-ind-sm"
            style="border: 2px solid lightgray;width: 259px;">
            <i class="fa fa-building-o fa-2x" aria-hidden="true"></i>
            <div class="msg">Please wait user wise menu access list is loading</div>
            <div style="width: 100px; margin:0 auto;" class="lineLoaderRelative"></div>
        </div> -->
        <div ng-if="!userList == undefined || userList.length==0" class="loadingIndicatorContainer ldng-ind-sm"
            style="margin-top: 9em;border: 2px solid lightgray;width: 259px;margin-left: 26em;">
            <i class="fa fa-building-o fa-2x" aria-hidden="true"></i>
            <div class="msg">Data not found</div>
        </div>
    </div>
    <div style="position: relative;width: 98.2%;" ng-if="userList != null && userList.length > 0">
        <div class="" ng-style="setAccessMgmtHeight()" ng-scrollbars style="overflow: auto;">
            <div class="menu-list-item" ng-repeat="x in userList | filter:userList.searchEmp" style="padding: 0px;">
                <div style="padding: 12px 13px;">
                    <div class="username">{{x .firstName}} {{x .lastName}}</div>
                    <div class="email"><span style="color: #777777;">Email ID : </span>{{x .emailId}}
                    </div>
                    <div class="contact-no"><span style="color: #777777;">Contact Number : </span> {{x .contactNo}}
                    </div>
                </div>
                <div ng-repeat="menu in x.empAccess"
                    style="padding: 1px 13px;margin-bottom: 1%;border-bottom: 1px solid lightgray;">
                    <div class="username" style="margin-bottom: 0px;">
                        {{menu.menuName}}
                        <div style="margin-bottom: 5%;">
                            <div class="menuCard" ng-repeat="submenu in menu.subMenuList"
                                style="background: #4b4795;color: white;padding: 5px 12px;"
                                ng-style="submenu.accessType == 'ROLE' && {'padding':'5px 7px','cursor':'not-allowed','background':'#9e9e9e'}">
                                <div style="display: flex;"
                                    ng-click="submenu.accessType != 'ROLE' ? removePopup(submenu) : ''">
                                    <span ng-if="submenu.accessType == 'ROLE'" class="dot active"></span>
                                    <span>{{submenu.subMenuName}}</span>
                                    <span class="material-icons removeEmpIcon" ng-if="submenu.accessType != 'ROLE'"
                                        style="color:#FFF;" ng-click="removePopup(submenu)">clear</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="userList != null && (userList | filter:searchEmp).length==0"
                class="loadingIndicatorContainer ldng-ind-sm"
                style="margin-top: 9em;border: 2px solid lightgray;width: 259px;margin-left: 26em;">
                <i class="fa fa-building-o fa-2x" aria-hidden="true"></i>
                <div class="msg">Data not found</div>
            </div>
        </div>
    </div>
</div>
<!---------------------------------------Model------------------------->
<div class="modal fade" id="adduseraccessModal" role="dialog">
    <div class="modal-dialog" style="width: 950px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" ng-click="clearData()">&times;</button>
                <h4 class="modal-title txt-color-primary"
                    style="text-align: center;font-weight: 500;font-family: roboto;">
                    Add User Access Module </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-----UI Select Dropdown-->
                    <div>
                        <div style="margin-right: 54px;float: right;width: 25%;">
                            <label class="from-control">Employee</label>
                            <input type="hidden" name="" ng-model="user.selectEmpId.empId" />
                            <ui-select ng-model="user.selectEmpId" theme="selectize" class="" on-select=""
                                ng-change="checkuserWiseMenu(user.selectEmpId.empId);"
                                style="position: relative;background: #FFF;">
                                <ui-select-match placeholder="Select employee">
                                    <span>{{$select.selected.concatedName}}</span>
                                    <button type="button" class="clear"
                                        ng-click="$event.stopPropagation();getModuleMenuList();getUserwiseMenuAccessList('');user.selectEmpId=undefined;"
                                        style="position: absolute;right: 3em;top: 5px;">X</button>
                                </ui-select-match>
                                <ui-select-choices repeat="item in employeeList | filter: $select.search">
                                    <span ng-bind-html="item.concatedName | highlight: $select.search"></span>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div style="width: 27%;float: right; margin-right: 17px;margin-bottom: 6px;margin-top: 2px;">
                            <label class="lbl-input " style="width: 100%;">Branch</label>
                            <select class="type-dropdown form-control dept-list  machine-input" ng-model="user.branchId"
                                ng-change="setSelectedBranch(user.branchId)">
                                <option value="">Select branch</option>
                                <option value="{{data.branchId}}" ng-repeat="data in branchList">
                                    {{data.name}}
                                </option>
                            </select>
                        </div>
                    </div>
                    <!---------------------------------------->
                    <!-- <div>
                        <div style="width: 29%;float: right; margin-right: 54px;margin-bottom: 6px;">
                            <label class="lbl-input " style="width: 100%;">Employee</label>
                            <select class="type-dropdown form-control dept-list  machine-input"
                                ng-model="user.selectEmpId" ng-change="checkuserWiseMenu(user.selectEmpId)">
                                <option value="">Select employee</option>
                                <option value="{{data.empId}}" ng-repeat="data in employeeList">
                                    {{data.concatedName}}
                                </option>
                            </select>
                        </div>
                        <div style="width: 27%;float: right; margin-right: 37px;margin-bottom: 6px;">
                            <label class="lbl-input " style="width: 100%;">Branch</label>
                            <select class="type-dropdown form-control dept-list  machine-input" ng-model="user.branchId"
                                ng-change="setSelectedBranch(user.branchId)">
                                <option value="">Select branch</option>
                                <option value="{{data.branchId}}" ng-repeat="data in branchList">
                                    {{data.name}}
                                </option>
                            </select>
                        </div>
                    </div> -->
                </div>
                <div class="row">
                    <div style="position: relative;width: 100%;padding: 24px;">
                        <div class="menu-list-container" style="max-height: 310px;" ng-scrollbars>
                            <div class="menu-list-item" ng-repeat="x in moduleList">
                                <div style="display: flex;">
                                    <div class="username" name="menu" ng-model="x.statusId" style="width: 100%;">
                                        {{x.menuName}}</div>
                                    <div style="display: flex;width: 100%;"
                                        ng-if="(x.submenuList | filter:{accessType : '!ROLE'}:true).length > 0">
                                        <span class="username"
                                            style="width: 100%;padding-top: 5px;text-align: right;">Select
                                            All</span>
                                        <span>
                                            <input type="checkbox" ng-model="x.checkmenuId"
                                                ng-click="checkAllMenu(x,x.checkmenuId)"></span>
                                    </div>
                                </div>
                                <div style="margin-top: 3px;">
                                    <div class="menuCard" ng-repeat="submenu in x.submenuList"
                                        ng-class="{'selectedRole' : submenu.statusId || submenu.accessType == 'ROLE'}"
                                        ng-style="submenu.accessType == 'ROLE' && {'cursor':'not-allowed','background':'#9e9e9e'}"
                                        ng-click="submenu.accessType != 'ROLE' ? settoggleAll(x,submenu.subMenuName,submenu.id) : ''">
                                        <div ng-model="submenu">
                                            <span ng-if="submenu.accessType == 'ROLE'" class="dot active"></span>
                                            {{submenu.subMenuName}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div>
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="font-size: 14px;"
                        ng-click="clearData()">{{langTranslate.Close}}</button>
                    <button type="button" class="btn btn-user" style="width: 70px;
                        font-size: 14px;color: white;" ng-click="addUserAccessData()">{{langTranslate.Add}}</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!----------------------------------DELETE MODEL----------------------------------------------->
<div id="confirmdeleteModal" class="modal fade confirmDeleteModal" role="dialog">
    <div class="trans-bg"></div>
    <img data-dismiss="modal" class="img-close" src="dist/icons/ic_close.png" style="top: 2em; width: 3em;right: 5em;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body"
                style="padding:10px;display: flex;height: 250px;background-color: rgba(118,125,167,0.76);">
                <div class="img-del-container">
                    <img src="dist/icons/ic_delete_lg.png">
                </div>
                <b
                    style="font-size: 18px;top: 26%; position: absolute;left: 39%;color: #4a4794;font-size: 28px;top: 26%;position: absolute;left: 32%; ">Are
                    you sure </b>
                <span style="color: #4a4794;font-size: 56px;top: 19%; position: absolute;left: 69%;"></span>
                <p class="msg" style="color: #4a4794bf;position: absolute;top: 47%;width: 95%;
                    text-align: center; font-size: 23px;">Do you want to remove this user access module from list</p>
                <div style="top: 82%;position: absolute; left: 63%;">
                    <button type="button" class="delete-btn" id="btnEmpConfirm"
                        ng-click="deleteUserAccessData()">{{langTranslate.Yes}}</button>
                    <button type="button" class="delete-btn" data-dismiss="modal">{{langTranslate.No}}</button>
                </div>
            </div>
        </div>
    </div>
</div>