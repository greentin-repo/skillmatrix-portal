(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"6xNQ":function(e,t,n){"use strict";n.r(t),n.d(t,"OjtCheckSheetModule",function(){return q});var i=n("ofXK"),r=n("tyNb"),l=n("3Pt+"),a=n("CYrx"),s=n("7jS0"),o=n("PSD3"),c=n.n(o),d=n("fXoL"),h=n("1kSV"),m=n("9O41"),p=n("Dh3D"),g=n("h77R"),f=n("X9RO"),u=n("bFKe"),S=n("Egam");function D(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",38),d["\u0275\u0275listener"]("click",function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().removeFilter()}),d["\u0275\u0275text"](1,"x"),d["\u0275\u0275elementEnd"]()}}function v(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",39),d["\u0275\u0275text"](1,"Filter Applied"),d["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"span",40),d["\u0275\u0275listener"]("click",function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().getSearchList(!0)}),d["\u0275\u0275elementEnd"]()}}function I(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"span",41),d["\u0275\u0275listener"]("click",function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().getSearchList(!1)}),d["\u0275\u0275elementEnd"]()}}function x(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"tr"),d["\u0275\u0275elementStart"](1,"td"),d["\u0275\u0275text"](2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"td"),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"td"),d["\u0275\u0275text"](6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"td"),d["\u0275\u0275text"](8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"td"),d["\u0275\u0275text"](10),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"td"),d["\u0275\u0275text"](12),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"td"),d["\u0275\u0275text"](14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"td",42),d["\u0275\u0275elementContainerStart"](16),d["\u0275\u0275elementStart"](17,"i",43),d["\u0275\u0275listener"]("click",function(){d["\u0275\u0275restoreView"](e);const n=t.$implicit;return d["\u0275\u0275nextContext"]().goOJTChecksheetDetailPage("/settings/skillMatrix/ojtchecksheet/add-ojt-check-sheet",n,!0)}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](18," \xa0 \xa0 "),d["\u0275\u0275elementStart"](19,"i",44),d["\u0275\u0275listener"]("click",function(){d["\u0275\u0275restoreView"](e);const n=t.$implicit;return d["\u0275\u0275nextContext"]().deleteChecksheet(n)}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementContainerEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.branchName),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.deptName),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.lineName),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.workstation),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.skillLevel),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.title),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.noOfDays)}}function L(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"td",47),d["\u0275\u0275text"](1," Data not found "),d["\u0275\u0275elementEnd"]())}function k(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"td",48),d["\u0275\u0275element"](1,"app-loading"),d["\u0275\u0275elementEnd"]())}function C(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"tr"),d["\u0275\u0275template"](1,L,2,0,"td",45),d["\u0275\u0275template"](2,k,2,0,"td",46),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!e.listLoading),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.listLoading)}}function w(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1," Please select plant "),d["\u0275\u0275elementEnd"]())}function E(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",73),d["\u0275\u0275template"](1,w,2,0,"div",35),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.filterFormData.controls.branch.errors.required)}}function F(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1," Please select department "),d["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",73),d["\u0275\u0275template"](1,F,2,0,"div",35),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.filterFormData.controls.deptId.errors.required)}}function P(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1," Please select cell/line "),d["\u0275\u0275elementEnd"]())}function A(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",73),d["\u0275\u0275template"](1,P,2,0,"div",35),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.filterFormData.controls.lineId.errors.required)}}function M(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1," Please select workstation "),d["\u0275\u0275elementEnd"]())}function B(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",73),d["\u0275\u0275template"](1,M,2,0,"div",35),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.filterFormData.controls.workstationId.errors.required)}}function O(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275text"](1," Please select level "),d["\u0275\u0275elementEnd"]())}function N(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",73),d["\u0275\u0275template"](1,O,2,0,"div",35),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"](2);d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.filterFormData.controls.skillLvl.errors.required)}}function V(e,t){1&e&&d["\u0275\u0275element"](0,"span",74)}function j(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",75),d["\u0275\u0275text"](1," Loading..."),d["\u0275\u0275elementEnd"]())}function R(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"span",76),d["\u0275\u0275text"](1,"Apply Filter"),d["\u0275\u0275elementEnd"]())}function T(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",49),d["\u0275\u0275elementStart"](1,"h4",50),d["\u0275\u0275text"](2,"Filter"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"button",51),d["\u0275\u0275listener"]("click",function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().dismissModal()}),d["\u0275\u0275elementStart"](4,"span",52),d["\u0275\u0275text"](5,"\xd7"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"form",53),d["\u0275\u0275listener"]("ngSubmit",function(){d["\u0275\u0275restoreView"](e);const t=d["\u0275\u0275nextContext"]();return t.submitFilterForm(t.filterFormData)}),d["\u0275\u0275elementStart"](7,"div",54),d["\u0275\u0275elementStart"](8,"perfect-scrollbar"),d["\u0275\u0275elementStart"](9,"div",55),d["\u0275\u0275elementStart"](10,"label",56),d["\u0275\u0275text"](11,"Plant"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"div",57),d["\u0275\u0275elementStart"](13,"ng-multiselect-dropdown",58),d["\u0275\u0275listener"]("ngModelChange",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().filterData.selectedBranch=t})("onSelect",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChange(t,"plant")})("onDeSelect",function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChange(!1,"plant")}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](14,E,2,1,"div",59),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"div",55),d["\u0275\u0275elementStart"](16,"label",60),d["\u0275\u0275text"](17,"Department"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"div",57),d["\u0275\u0275elementStart"](19,"ng-multiselect-dropdown",61),d["\u0275\u0275listener"]("ngModelChange",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().searchDet.deptIds=t})("onSelect",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChange(t,"dept")})("onDeSelect",function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChange(!1,"dept")}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](20,y,2,1,"div",59),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"div",55),d["\u0275\u0275elementStart"](22,"label",62),d["\u0275\u0275text"](23,"Cell/Line"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](24,"div",57),d["\u0275\u0275elementStart"](25,"ng-multiselect-dropdown",63),d["\u0275\u0275listener"]("ngModelChange",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().searchDet.line=t})("onSelect",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChange(t,"cell")})("onDeSelect",function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChange(!1,"cell")})("onSelectAll",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChangeAll(t,"cell")})("onDeSelectAll",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChangeAll(t,"cell")}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](26,A,2,1,"div",59),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](27,"div",55),d["\u0275\u0275elementStart"](28,"label",64),d["\u0275\u0275text"](29,"Workstation"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](30,"div",57),d["\u0275\u0275elementStart"](31,"ng-multiselect-dropdown",65),d["\u0275\u0275listener"]("ngModelChange",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().searchDet.workstation=t})("onSelect",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChange(t,"workstation")})("onDeSelect",function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChange(!1,"workstation")})("onSelectAll",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChangeAll(t,"Workstation")})("onDeSelectAll",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().onChangeAll(t,"Workstation")}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](32,B,2,1,"div",59),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](33,"div",55),d["\u0275\u0275elementStart"](34,"label",66),d["\u0275\u0275text"](35,"Level"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](36,"div",57),d["\u0275\u0275elementStart"](37,"ng-multiselect-dropdown",67),d["\u0275\u0275listener"]("ngModelChange",function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().filterData.selectedLvl=t}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](38,N,2,1,"div",59),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](39,"div",68),d["\u0275\u0275elementStart"](40,"button",69),d["\u0275\u0275template"](41,V,1,0,"span",70),d["\u0275\u0275template"](42,j,2,0,"span",71),d["\u0275\u0275template"](43,R,2,0,"span",72),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("formGroup",e.filterFormData),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("placeholder","Select Plant")("settings",e.SingleBranchDropdownSettings)("data",e.branchAccessList)("disabled",!1)("ngModel",e.filterData.selectedBranch),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.submitAttempted&&e.filterFormData.controls.branch.invalid&&(e.filterFormData.controls.branch.touched||e.filterFormData.controls.branch.dirty)),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("placeholder","Select Department")("settings",e.SingleDropdownSettings)("data",e.departmentList)("disabled",!1)("ngModel",e.searchDet.deptIds),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.submitAttempted&&e.filterFormData.controls.deptId.invalid&&(e.filterFormData.controls.deptId.touched||e.filterFormData.controls.deptId.dirty)),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("placeholder","Select Cell/Line")("settings",e.multipleDropdownSettings)("data",e.cellList)("disabled",!1)("ngModel",e.searchDet.line),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.submitAttempted&&e.filterFormData.controls.lineId.invalid&&(e.filterFormData.controls.lineId.touched||e.filterFormData.controls.lineId.dirty)),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("placeholder","Select Workstation")("settings",e.multipleDropdownSettings)("data",e.workforceList)("disabled",!1)("ngModel",e.searchDet.workstation),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.submitAttempted&&e.filterFormData.controls.workstationId.invalid&&(e.filterFormData.controls.workstationId.touched||e.filterFormData.controls.workstationId.dirty)),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("placeholder","Select Level")("settings",e.SingleLevelDropdownSettings)("ngModel",e.filterData.selectedLvl)("data",e.LevelList)("disabled",!1),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.submitAttempted&&e.filterFormData.controls.skillLvl.invalid&&(e.filterFormData.controls.skillLvl.touched||e.filterFormData.controls.skillLvl.dirty)),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",e.submitSpinner),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.submitSpinner),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",!e.submitSpinner)}}const W=function(e){return{applied:e}},_=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r){this.modalService=e,this.router=t,this.skillMatrixService=n,this.fb=i,this.alertService=r,this.searchDet={},this.filterData={},this.SingleBranchDropdownSettings={},this.SingleLevelDropdownSettings={},this.SingleDropdownSettings={},this.multipleDropdownSettings={},this.branchAccessList=[],this.checksheetList=[],this.LevelList=[],this.userDet={},this.submitSpinner=!1,this.listLoading=!1,this.submitAttempted=!1,this.staticPagination={total:0,page:1,maxSize:5,itemsPerPage:10,totalPages:0,listLength:0},this.departmentList=[],this.workforceList=[],this.lineId=[],this.dataSpinner=[],this.reportBodyCell={}}ngOnInit(){this.userDet=JSON.parse(localStorage.getItem("userDet")),console.log(this.userDet),this.getLevelList(),this.getBranchAccessList(),this.SingleBranchDropdownSettings={singleSelection:!0,idField:"branchId",textField:"branchName",allowSearchFilter:!0,closeDropDownOnSelection:!0},this.SingleLevelDropdownSettings={singleSelection:!0,idField:"id",textField:"levelName",allowSearchFilter:!0,closeDropDownOnSelection:!0},this.SingleDropdownSettings={singleSelection:!0,idField:"id",textField:"name",allowSearchFilter:!0,closeDropDownOnSelection:!0},this.multipleDropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:2,allowSearchFilter:!0},this.filterFormData=this.fb.group({branch:new l.f("",l.z.required),lineId:new l.f(""),workstationId:new l.f(""),deptId:new l.f(""),skillLvl:new l.f("")}),this.filterList("")}getLevelList(){this.skillMatrixService.getLevelList("apis/sm/getLevelList").subscribe(e=>{console.log(e),e.result&&(this.LevelList=e.dataList)})}getSearchList(e){this.clearPagination(),this.searchDet.searchData=e,e||(this.searchDet.searchInput=""),this.filterList(this.searchDet.filterFlag?"filter":"")}filterModalOpen(e){console.log("In filter"),this.clearPagination(),this.modalService.open(e,{windowClass:"filterPopup"})}getBranchAccessList(){this.skillMatrixService.getBranchAccessList("getBranchAccessSetupByEmpId/"+this.userDet.organization.orgId+"/"+this.userDet.empId).subscribe(e=>{console.log(e),e.result?(this.branchAccessList=e.branchAccessList,console.log(this.branchAccessList),this.filterList("")):this.branchAccessList=[{branchId:this.userDet.branch.branchId,branchName:this.userDet.branch.name}]})}modalOpen(e,t){this.modalService.open(e,{windowClass:t})}goOJTChecksheetDetailPage(e,t,n){(t=""==t?{isEditable:!0,isEditPoint:!1,isEditParameter:!1,checkSheetId:0}:{isEditable:!0,isEditPoint:!1,isEditParameter:!1,checkSheetId:t.id}).isEditable=n;var i=Object.assign({},t,{tmpPagination:this.staticPagination});e&&(null!=i?(localStorage.removeItem("setChecksheetId"),localStorage.setItem("setChecksheetId",JSON.stringify(i))):localStorage.removeItem("setChecksheetId"),this.router.navigateByUrl(e))}filterList(e){this.listLoading=!0,this.submitSpinner=!0,this.staticPagination.offset=1==this.staticPagination.page?0:(this.staticPagination.page-1)*this.staticPagination.itemsPerPage,console.log(this.filterData.slectedBranch);let t={orgId:this.userDet.organization.orgId,offset:this.staticPagination.offset,limit:this.staticPagination.itemsPerPage,updatedBy:this.userDet.empId,createdBy:this.userDet.empId};if(this.sorting&&""!=this.sorting.direction&&(t.colName=this.sorting.active,t.orderType=this.sorting.direction.toUpperCase()),this.searchDet.searchData&&this.searchDet.searchInput&&""!=this.searchDet.searchInput&&(t.search=this.searchDet.searchInput),"filter"==e){if(this.filterFormData.invalid)return void Object.keys(this.filterFormData.controls).forEach(e=>{this.filterFormData.controls[e].markAsDirty()});if(null!=this.filterData.selectedBranch&&this.filterData.selectedBranch.length>0)for(let e=0;e<this.filterData.selectedBranch.length;e++)t.branchId=this.filterData.selectedBranch[e].branchId;if(null!=this.filterData.selectedLvl&&this.filterData.selectedLvl.length>0)for(let e=0;e<this.filterData.selectedLvl.length;e++)t.skillLvlId=this.filterData.selectedLvl[e].id;if(null!=this.getIDsArray(this.searchDet.workstation)&&this.getIDsArray(this.searchDet.workstation).length>0)for(let e=0;e<this.getIDsArray(this.searchDet.workstation).length;e++)t.workstationIds=this.getIDsArray(this.searchDet.workstation);if(null!=this.searchDet.deptIds&&this.searchDet.deptIds.length>0)for(let e=0;e<this.searchDet.deptIds.length;e++)t.deptId=this.searchDet.deptIds[0].id;if(null!=this.getIDsArray(this.searchDet.line)&&this.getIDsArray(this.searchDet.line).length>0)for(let e=0;e<this.getIDsArray(this.searchDet.line).length;e++)t.lineIds=this.getIDsArray(this.searchDet.line)}else t.branchId=this.userDet.branch.branchId;console.log(t),this.skillMatrixService.getChecksheetList("apis/sm/getChecksheetList",t).subscribe(e=>{this.submitSpinner=!1,this.listLoading=!1,e.result?(1==this.staticPagination.page&&(this.staticPagination.total=e.totalCount,this.staticPagination.totalPages=Math.ceil(e.totalCount/this.staticPagination.itemsPerPage)),null!=e.dataList&&e.dataList.length>0?(this.checksheetList=e.dataList,this.staticPagination.listLength=this.checksheetList.length):(this.staticPagination.listLength=this.checksheetList.length,this.listLoading=!1,this.submitSpinner=!1)):(this.listLoading=!1,this.submitSpinner=!1,this.checksheetList=[])},e=>{this.listLoading=!1})}deleteChecksheet(e){c.a.fire({title:"Are You Sure!",text:"Do you want to remove this checksheet?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#7044cd",cancelButtonColor:"#d33",confirmButtonText:"Yes, Remove It",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(t=>{this.dataSpinner[e]=!0,t.isConfirmed?this.skillMatrixService.deleteChecksheet("apis/sm/deleteChecksheet",{updatedBy:this.userDet.empId,createdBy:this.userDet.empId,checkSheetId:e.id}).subscribe(e=>{this.dataSpinner[e.id]=!1,e.result?(this.alertService.success("OJT checksheet removed successfully."),this.filterList(this.searchDet.filterFlag?"filter":"")):this.alertService.error(100==e.statusCode?e.reason:"Error occurred while removing data. Please try again")}):this.dataSpinner[e.checksheetPointId]=!1})}sortData(e){this.sorting=e,this.filterList("")}loadMore(e){this.staticPagination=e,this.searchDet.filterFlag?(this.checksheetList=[],this.listLoading=!0,this.filterList("filter")):(this.checksheetList=[],this.listLoading=!0,this.filterList(""))}clearPagination(){this.staticPagination={total:0,page:1,maxSize:5,itemsPerPage:10,totalPages:0,listLength:0}}dismissModal(){this.submitAttempted=!1,this.filterData.selectedBranch=[],this.searchDet.deptIds=[],this.searchDet.line=[],this.searchDet.workstation=[],this.filterData.selectedLvl=[],this.modalService.dismissAll()}submitFilterForm(e){this.submitAttempted=!0,e.invalid?Object.keys(e.controls).forEach(t=>{e.controls[t].markAsDirty()}):(this.searchDet.filterFlag=!0,this.filterList("filter"),this.modalService.dismissAll())}removeFilter(){this.submitAttempted=!1,this.filterFormData.patchValue({branch:[],skillLvl:[]}),this.filterData.selectedBranch=[],this.searchDet.deptIds=[],this.searchDet.workstation=[],this.searchDet.line=[],this.filterData.selectedLvl=[],this.searchDet.filterFlag=!1,this.filterList("")}getSortFunction(e,t){return console.log(e,t),e&&Array.isArray(e)&&e.length>0&&("dept"!==t&&"level"!==t||e.sort(function(e,t){var n=e.branchName?e.branchName.toUpperCase():"",i=t.branchName?t.branchName.toUpperCase():"";return n<i?-1:n>i?1:0})),e}getDepartmentList(e){this.skillMatrixService.getDepartmentByBranch("getdepartmentlistbybranchid/"+e).subscribe(e=>{e.result&&null!=e.deptList&&e.deptList.length>0?(this.departmentList=this.setArray(e.deptList,"deptId","deptName"),this.departmentList=this.sortFunction(this.departmentList,"deptName"),this.searchDet.dept=[this.departmentList[0]],this.searchDet.addForm||(this.searchDet.departmentList=this.setArray(e.deptList,"deptId","deptName"))):this.searchDet.departmentList=[]})}getCellList(e){console.log(e),this.reportBodyCell={branchId:this.branchId,deptId:e},this.skillMatrixService.getCellList("apis/sm/getCellList/",this.reportBodyCell).subscribe(e=>{console.log(e),e.result&&(null!=e.dataList&&e.dataList.length>0?(this.cellList=this.setArray(e.dataList,"lineId","lineName"),console.log(this.cellList),this.cellList=this.sortFunction(this.cellList,"lineName"),this.searchDet.dept=[this.cellList[0]],this.searchDet.cellList=this.setArray(e.dataList,"lineId","lineName")):(this.cellList=[],this.searchDet.cellList=[]))})}getWorkforceList(e){console.log(e);let t={branchId:this.branchId,orgId:this.userDet.organization.orgId,deptId:this.deptId,lineIds:[e]};console.log(t),this.skillMatrixService.getWorkforceDeploymentData("apis/sm/getWorkstationList",t).subscribe(e=>{e.result?(console.log(e),null!=e.dataList&&e.dataList.length>0?(this.workforceList=this.setArray(e.dataList,"id","workstation"),this.workforceList=this.sortFunction(this.workforceList,"workstation"),this.searchDet.workforceList=[this.workforceList[0]],console.log(this.workforceList)):this.workforceList=[]):this.workforceList=[]})}setArray(e,t,n){let i=[];if(null!=e&&e.length>0)for(const r of e)r.id=r[t],r.name=r[n],i.push(r);return i}getIDsArray(e){let t=[];if(null!=e&&e.length>0)for(const n of e)t.push(n.id);return t}onChange(e,t){e?(console.log(e),"dept"==t&&(this.cellList=[],this.deptId=e.id,this.searchDet.lineId=[],this.resetFormField(this.filterFormData,"cellLineId"),this.resetFormField(this.filterFormData,"workstationId"),this.getCellList(this.deptId)),"plant"==t&&(console.log(e),this.branchId=e.branchId,this.searchDet.deptIds=[],this.resetFormField(this.filterFormData,"deptId"),this.resetFormField(this.filterFormData,"cellLineId"),this.resetFormField(this.filterFormData,"workstationId"),this.getDepartmentList(this.branchId),this.searchDet.addForm&&console.log("inside")),"cell"==t&&(console.log(e),this.lineId=e.id,this.searchDet.work=[],this.resetFormField(this.filterFormData,"workstationId"),this.getWorkforceList(this.lineId))):"plant"==t?this.searchDet&&(this.departmentList=[],this.searchDet.departmentList=[],this.cellList=[],this.searchDet.cellList=[],this.searchDet.lineId=[]):"dept"==t&&(this.cellList=[],this.searchDet.cellList=[],this.searchDet.lineId=[])}resetFormField(e,t){Object.keys(e.controls).forEach(n=>{n==t&&(e.get(t).reset(),e.get(t).markAsPristine(),e.get(t).markAsUntouched())})}sortFunction(e,t){return null!=e&&e.length>0&&e.sort(function(e,n){var i=Number(e[t])?e[t]:e[t].toUpperCase(),r=Number(n[t])?n[t]:n[t].toUpperCase();return i<r?-1:i>r?1:0}),e}onChangeAll(e,t){e?console.log("Select All action"):console.log("Unselect All action")}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](h.j),d["\u0275\u0275directiveInject"](r.f),d["\u0275\u0275directiveInject"](a.a),d["\u0275\u0275directiveInject"](l.e),d["\u0275\u0275directiveInject"](s.b))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-ojt-check-sheet"]],decls:53,vars:11,consts:[[1,"row","m-0"],[1,"col-8","m-auto"],["title","OJT Checksheet"],[1,"col-3","m-auto"],[1,"col-1","p-0","m-auto","text-center"],[1,"btn-filter-wrap"],["title","Filter",1,"btn","btn-default","filter-btn",3,"ngClass","click"],["aria-hidden","true",1,"fa","fa-filter","filter-icon"],["class","btn-clear-filter",3,"click",4,"ngIf"],["class","lbl-filter-applied",4,"ngIf"],[1,"homepage-block","bg-Transperant","p-l-15","p-r-15"],[1,"extraContent"],[1,"p-l-0","p-r-5","col-4"],[1,"col-12"],[1,"form-group","has-search"],["class","fa fa-search form-control-feedback",3,"click",4,"ngIf"],["class","fa fa-times-circle form-control-clear",3,"click",4,"ngIf"],["type","text","name","searchInput","placeholder","Search by title or workstation","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"col-4","p-r-5","p-l-5","form-group"],[1,"col-4","p-0"],[1,"addRegDiv",2,"bottom","-0.1rem"],["type","button",1,"btn","addRegBtn","m-0",3,"click"],[1,"fa","fa-plus","m-r-10"],[1,"table-block"],[1,"table-responsive","tableFixHead"],["matSort","",1,"table",3,"matSortChange"],["mat-sort-header","BranchName",1,"fixedColumn"],["mat-sort-header","DeptName"],["mat-sort-header","LineName"],["mat-sort-header","Workstation"],["mat-sort-header","Level"],["mat-sort-header","Title"],["mat-sort-header","NoOfDay"],[1,"actionTh","fixedColumn"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"staticPagination","paginationData"],["filterPopup",""],[1,"btn-clear-filter",3,"click"],[1,"lbl-filter-applied"],[1,"fa","fa-search","form-control-feedback",3,"click"],[1,"fa","fa-times-circle","form-control-clear",3,"click"],[1,"actionTd","fixedColumn"],[1,"fa","fa-edit","editIcon",3,"click"],[1,"fas","fa-trash-alt","deleteIcon",3,"click"],["colspan","11","class","text-center no-record-found",4,"ngIf"],["colspan","11","class","text-center loading-div",4,"ngIf"],["colspan","11",1,"text-center","no-record-found"],["colspan","11",1,"text-center","loading-div"],[1,"modal-header"],["id","myModalLabel2",1,"modal-title","popup-header-txt"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["autocomplete","off",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"modal-body","p-2",2,"height","calc(100vh - 14vh)"],[1,"row","m-b-0"],["for","branch",1,"col-sm-12","col-form-label","filter-label"],[1,"col-sm-12"],["name","branch","id","branch","formControlName","branch",1,"custom-multiSelection","assessmentdropDown","customWidthForRport",3,"placeholder","settings","data","disabled","ngModel","ngModelChange","onSelect","onDeSelect"],["class","custom-errorMsg",4,"ngIf"],["for","deptId",1,"col-sm-12","col-form-label","filter-label"],["name","deptId","id","deptId","formControlName","deptId",1,"custom-multiSelection","assessmentdropDown","customWidthForRport",3,"placeholder","settings","data","disabled","ngModel","ngModelChange","onSelect","onDeSelect"],["for","lineId",1,"col-sm-12","col-form-label","filter-label"],["name","lineId","id","lineId","formControlName","lineId",1,"custom-multiSelection","assessmentdropDown","customWidthForRport",3,"placeholder","settings","data","disabled","ngModel","ngModelChange","onSelect","onDeSelect","onSelectAll","onDeSelectAll"],["for","workstationId",1,"col-sm-12","col-form-label","filter-label"],["name","workstationId","id","workstationId","formControlName","workstationId",1,"custom-multiSelection","assessmentdropDown","customWidthForRport",3,"placeholder","settings","data","disabled","ngModel","ngModelChange","onSelect","onDeSelect","onSelectAll","onDeSelectAll"],["for","skillLvlId",1,"col-sm-12","col-form-label","filter-label"],["name","skillLvl","id","skillLvlId","formControlName","skillLvl",1,"custom-multiSelection","assessmentdropDown","customWidthForRport",3,"placeholder","settings","ngModel","data","disabled","ngModelChange"],[1,"modal-footer","footerBlock","text-right"],["type","submit",1,"btn","submitBtn","event-btn"],["class","spinner-grow spinner-grow-sm","role","status",4,"ngIf"],["class","load-text",4,"ngIf"],["class","btn-text",4,"ngIf"],[1,"custom-errorMsg"],["role","status",1,"spinner-grow","spinner-grow-sm"],[1,"load-text"],[1,"btn-text"]],template:function(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275elementStart"](1,"div",1),d["\u0275\u0275element"](2,"app-topBar",2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](3,"div",3),d["\u0275\u0275elementStart"](4,"div",4),d["\u0275\u0275elementStart"](5,"div",5),d["\u0275\u0275elementStart"](6,"button",6),d["\u0275\u0275listener"]("click",function(){d["\u0275\u0275restoreView"](e);const n=d["\u0275\u0275reference"](52);return t.filterModalOpen(n)}),d["\u0275\u0275element"](7,"i",7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](8,D,2,0,"div",8),d["\u0275\u0275template"](9,v,2,0,"div",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"div",10),d["\u0275\u0275elementStart"](11,"div",11),d["\u0275\u0275elementStart"](12,"div",0),d["\u0275\u0275elementStart"](13,"div",12),d["\u0275\u0275elementStart"](14,"div",0),d["\u0275\u0275elementStart"](15,"div",13),d["\u0275\u0275elementStart"](16,"div",14),d["\u0275\u0275template"](17,b,1,0,"span",15),d["\u0275\u0275template"](18,I,1,0,"span",16),d["\u0275\u0275elementStart"](19,"input",17),d["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchDet.searchInput=e})("keyup",function(e){return 13==e.keyCode?t.getSearchList(!0):""}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](20,"div",18),d["\u0275\u0275elementStart"](21,"div",19),d["\u0275\u0275elementStart"](22,"div",20),d["\u0275\u0275elementStart"](23,"button",21),d["\u0275\u0275listener"]("click",function(){return t.goOJTChecksheetDetailPage("/settings/skillMatrix/ojtchecksheet/add-ojt-check-sheet","",!0)}),d["\u0275\u0275element"](24,"i",22),d["\u0275\u0275text"](25," Create OJT Checksheet "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](26,"div",23),d["\u0275\u0275elementStart"](27,"div",24),d["\u0275\u0275elementStart"](28,"table",25),d["\u0275\u0275listener"]("matSortChange",function(e){return t.sortData(e)}),d["\u0275\u0275elementStart"](29,"thead"),d["\u0275\u0275elementStart"](30,"tr"),d["\u0275\u0275elementStart"](31,"th",26),d["\u0275\u0275text"](32,"Plant"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](33,"th",27),d["\u0275\u0275text"](34,"Department"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](35,"th",28),d["\u0275\u0275text"](36,"Cell/Line"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](37,"th",29),d["\u0275\u0275text"](38,"Workstation"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](39,"th",30),d["\u0275\u0275text"](40,"Level"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](41,"th",31),d["\u0275\u0275text"](42,"Title"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](43,"th",32),d["\u0275\u0275text"](44,"No. of Days"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](45,"th",33),d["\u0275\u0275text"](46,"Action"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](47,"tbody"),d["\u0275\u0275template"](48,x,20,7,"tr",34),d["\u0275\u0275template"](49,C,3,2,"tr",35),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](50,"app-pagination",36),d["\u0275\u0275listener"]("paginationData",function(e){return t.loadMore(e)}),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](51,T,44,34,"ng-template",null,37,d["\u0275\u0275templateRefExtractor"])}2&e&&(d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("ngClass",d["\u0275\u0275pureFunction1"](9,W,t.searchDet.filterFlag)),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.searchDet.filterFlag),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.searchDet.filterFlag),d["\u0275\u0275advance"](8),d["\u0275\u0275property"]("ngIf",!t.searchDet.searchData),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.searchDet.searchData),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngModel",t.searchDet.searchInput),d["\u0275\u0275advance"](29),d["\u0275\u0275property"]("ngForOf",t.checksheetList),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",null==t.checksheetList||0==t.checksheetList.length),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("staticPagination",t.staticPagination))},directives:[m.a,i.NgClass,i.NgIf,l.c,l.o,l.r,p.a,p.b,i.NgForOf,g.a,f.a,l.A,l.p,l.h,u.b,S.a,l.g],styles:[".checksheetinputBox[_ngcontent-%COMP%], .checksheetinputBox[_ngcontent-%COMP%]:hover{border-radius:4px;box-shadow:0 0 2px 1px #eae1ea;border:1px solid #dedede;background:#fff}.extraContent[_ngcontent-%COMP%]   .addRegDiv[_ngcontent-%COMP%]   .addRegBtn[_ngcontent-%COMP%], .extraContent[_ngcontent-%COMP%]   .addRegDiv[_ngcontent-%COMP%]   .addRegBtn[_ngcontent-%COMP%]:focus, .extraContent[_ngcontent-%COMP%]   .addRegDiv[_ngcontent-%COMP%]   .addRegBtn[_ngcontent-%COMP%]:hover{position:absolute;right:6rem!important;font:normal normal 400 14px/37px Helvetica Neue;color:#fff;text-transform:capitalize;top:0;box-shadow:none;outline:none;border:none;padding:0}.tableFixHead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]}),e})()},{path:"add-ojt-check-sheet",loadChildren:()=>n.e(20).then(n.bind(null,"SkBa")).then(e=>e.AddOjtCheckSheetModule)}];let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[r.i.forChild(_)],r.i]}),e})();var U=n("PRC2"),z=n("ebz3");let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[i.CommonModule,z.a,J,s.j,s.h,l.j,S.b,l.w,U.a,z.a,s.g]]}),e})()}}]);